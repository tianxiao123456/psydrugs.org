# Drugs è‡ªåŠ¨å¤„ç†å·¥å…·

æœ¬ç›®å½•åŒ…å«ç”¨äºè‡ªåŠ¨å¤„ç†è¯ç‰©ï¼ˆDrugsï¼‰ç›¸å…³å†…å®¹çš„Pythonè„šæœ¬ã€‚

## è„šæœ¬è¯´æ˜

### 1. `auto_drugs.py` - ç»¼åˆè‡ªåŠ¨å¤„ç†è„šæœ¬ï¼ˆæ¨èä½¿ç”¨ï¼‰

è¿™æ˜¯ä¸»è¦çš„è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œæ‰§è¡Œæ‰€æœ‰drugsç›¸å…³çš„ç»´æŠ¤ä»»åŠ¡ã€‚

**åŠŸèƒ½:**
- ç»Ÿè®¡drugsæ–‡ä»¶æ•°é‡
- éªŒè¯æ‰€æœ‰drugsæ–‡ä»¶çš„front-matter
- è‡ªåŠ¨ç”Ÿæˆ/æ›´æ–° `drugs.yml` é…ç½®æ–‡ä»¶
- æä¾›ä¸‹ä¸€æ­¥å»ºè®®

**ä½¿ç”¨æ–¹æ³•:**
```bash
python3 tools/drugs/auto_drugs.py
```

**è¾“å‡ºç¤ºä¾‹:**
- æ˜¾ç¤ºå½“å‰drugsæ–‡ä»¶ç»Ÿè®¡
- éªŒè¯ç»“æœ
- æ›´æ–°é…ç½®æ–‡ä»¶
- å®Œæˆæ‘˜è¦

---

### 2. `generate_drugs_yml.py` - ç”Ÿæˆdrugs.ymlé…ç½®

è‡ªåŠ¨æ‰«æ `source/drugs/` ç›®å½•ä¸­çš„æ‰€æœ‰ Markdown æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆå®Œæ•´çš„ `drugs.yml` é…ç½®ã€‚

**åŠŸèƒ½:**
- æ‰«ææ‰€æœ‰.mdæ–‡ä»¶ï¼ˆæ’é™¤new-pageæ¨¡æ¿ï¼‰
- æŒ‰å­—æ¯é¡ºåºæ’åº
- è‡ªåŠ¨å¤‡ä»½åŸé…ç½®æ–‡ä»¶
- æ›´æ–°æ ‘çŠ¶å¯¼èˆªç»“æ„

**ä½¿ç”¨æ–¹æ³•:**
```bash
python3 tools/drugs/generate_drugs_yml.py
```

**ç”Ÿæˆçš„é…ç½®ç»“æ„:**
```yaml
tree:
  'å¯¼è®º':
    - introduction-to-overdose
    - /
    - index
  'æ‰€æœ‰è¯ç‰©':
    - ACL
    - ADD
    - AES
    - ... (æ‰€æœ‰è¯ç‰©)
```

---

### 3. `validate_drugs.py` - éªŒè¯drugsæ–‡ä»¶å®Œæ•´æ€§

éªŒè¯æ‰€æœ‰drugsæ–‡ä»¶æ˜¯å¦å…·æœ‰æ­£ç¡®çš„front-matterå…ƒæ•°æ®ã€‚

**åŠŸèƒ½:**
- æ£€æŸ¥æ‰€æœ‰drugsæ–‡ä»¶çš„YAML front-matter
- è¯†åˆ«ç¼ºå°‘front-matterçš„æ–‡ä»¶
- è‡ªåŠ¨ä¸ºç¼ºå°‘front-matterçš„æ–‡ä»¶æ·»åŠ åŸºç¡€å…ƒæ•°æ®
- ç”ŸæˆéªŒè¯æŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•:**
```bash
python3 tools/drugs/validate_drugs.py
```

**è¾“å‡ºç¤ºä¾‹:**
```
=== Drugs æ–‡ä»¶éªŒè¯æŠ¥å‘Š ===
æ€»æ–‡ä»¶æ•°: 56
å·²æœ‰front-matter: 56
ç¼ºå°‘front-matter: 0
æ–°å¢front-matter: 0

âœ“ æ‰€æœ‰drugsæ–‡ä»¶éªŒè¯å®Œæ¯•ï¼Œæ— é—®é¢˜
```

---

## å¿«é€Ÿå¼€å§‹

### ä¸€é”®æ‰§è¡Œæ‰€æœ‰å¤„ç†

```bash
python3 tools/drugs/auto_drugs.py
```

### å•ç‹¬æ‰§è¡Œç‰¹å®šä»»åŠ¡

1. **ä»…éªŒè¯æ–‡ä»¶:**
  ```bash
  python3 tools/drugs/validate_drugs.py
  ```

2. **ä»…æ›´æ–°é…ç½®:**
  ```bash
  python3 tools/drugs/generate_drugs_yml.py
  ```

---

## å·¥ä½œæµç¨‹

### æ·»åŠ æ–°è¯ç‰©æ–‡ä»¶å

1. åœ¨ `source/drugs/` ç›®å½•ä¸­åˆ›å»ºæ–°çš„ `.md` æ–‡ä»¶
2. è¿è¡Œ `python3 tools/drugs/auto_drugs.py` è‡ªåŠ¨å¤„ç†
3. è¿è¡Œ `hexo generate` é‡æ–°ç”Ÿæˆé™æ€ç½‘ç«™
4. éªŒè¯æ•ˆæœ

### ä¿®æ”¹ç°æœ‰è¯ç‰©ä¿¡æ¯å

1. ç¼–è¾‘ç›¸åº”çš„ `.md` æ–‡ä»¶
2. è¿è¡Œ `python3 tools/drugs/auto_drugs.py`ï¼ˆå¦‚æœä¿®æ”¹äº†æ–‡ä»¶åæˆ–front-matterï¼‰
3. è¿è¡Œ `hexo server` æŸ¥çœ‹æœ¬åœ°æ•ˆæœ

---

## é…ç½®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ä½ç½® | è¯´æ˜ |
|------|------|------|
| drugsé…ç½® | `source/_data/wiki/drugs.yml` | å®šä¹‰drugså¯¼èˆªç»“æ„ |
| drugsæ–‡ä»¶ | `source/drugs/*.md` | å„ä¸ªè¯ç‰©çš„è¯¦ç»†æ–‡æ¡£ |
| å¤‡ä»½ | `source/_data/wiki/drugs.yml.backup` | è‡ªåŠ¨å¤‡ä»½çš„åŸé…ç½® |

---

## æ–‡ä»¶è¦æ±‚

### drugsæ–‡ä»¶æ ¼å¼

æ¯ä¸ªdrugsæ–‡ä»¶åº”åŒ…å«YAML front-matter:

```markdown
---
title: è¯ç‰©åç§°
description: ç®€çŸ­æè¿°
published: true
date: 2024-01-30T11:16:42.000Z
tags: 
  - æ ‡ç­¾1
  - æ ‡ç­¾2
editor: markdown
dateCreated: 2024-01-30T11:16:42.000Z
---

# è¯ç‰©åç§°

è¯¦ç»†å†…å®¹...
```

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šè„šæœ¬æ‰¾ä¸åˆ°æ–‡ä»¶
**è§£å†³:** ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œè„šæœ¬
```bash
cd /home/krvy/Psydrugs.icu
python3 auto_drugs.py
```

### é—®é¢˜ï¼šdrugs.ymlæ²¡æœ‰æ›´æ–°
**è§£å†³:** 
1. æ£€æŸ¥ `source/drugs/` ä¸­æ˜¯å¦æœ‰æ–°æ–‡ä»¶
2. ç¡®ä¿æ–‡ä»¶åä»¥ `.md` ç»“å°¾
3. æ‰‹åŠ¨åˆ é™¤å¤‡ä»½é‡è¯•ï¼š`rm source/_data/wiki/drugs.yml.backup`

### é—®é¢˜ï¼šç½‘ç«™ä¸æ˜¾ç¤ºæ–°è¯ç‰©
**è§£å†³:**
1. è¿è¡Œ `hexo clean` æ¸…ç†ç¼“å­˜
2. è¿è¡Œ `hexo generate` é‡æ–°ç”Ÿæˆ
3. è¿è¡Œ `hexo server` æœ¬åœ°é¢„è§ˆ

---

## åç»­å»ºè®®

- âœ… è‡ªåŠ¨åŒ–å·²å®Œæˆï¼Œæ‰€æœ‰drugsæ–‡ä»¶å’Œé…ç½®å·²æ›´æ–°
- ğŸ“ å»ºè®®å®šæœŸè¿è¡Œ `auto_drugs.py` ä¿æŒé…ç½®æœ€æ–°
- ğŸ”„ è€ƒè™‘æ·»åŠ åˆ°CI/CDæµç¨‹ä¸­è‡ªåŠ¨æ‰§è¡Œ
- ğŸ“¦ å¯æ‰©å±•æ”¯æŒå…¶ä»–å†…å®¹æ¨¡å—ï¼ˆå¦‚combination, recoveryç­‰ï¼‰

---

## æŠ€æœ¯ç»†èŠ‚

### è„šæœ¬ä¾èµ–
- Python 3.6+
- æ ‡å‡†åº“: `os`, `re`, `subprocess`, `datetime`
- æ— ç¬¬ä¸‰æ–¹ä¾èµ–

### æ‰§è¡Œæµç¨‹
1. æ‰«æ `source/drugs/` ç›®å½•
2. æå–æ‰€æœ‰ `.md` æ–‡ä»¶å
3. éªŒè¯front-matterå®Œæ•´æ€§
4. ç”ŸæˆYAMLé…ç½®
5. å¤‡ä»½å¹¶è¦†ç›–åŸé…ç½®æ–‡ä»¶

---

## ä½œè€…ä¿¡æ¯

- è‡ªåŠ¨åŒ–è„šæœ¬åˆ›å»ºäº: 2026-01-22
- é¡¹ç›®: Psydrugs.icu
- ç›®çš„: ç®€åŒ–drugså†…å®¹ç®¡ç†

